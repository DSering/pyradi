

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Spherical Plotting utility &mdash; pyradi  documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyradi  documentation" href="index.html" />
    <link rel="next" title="Utility Functions" href="ryutils.html" />
    <link rel="prev" title="Plotting utility" href="ryplot.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ryutils.html" title="Utility Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ryplot.html" title="Plotting utility"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pyradi  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="spherical-plotting-utility">
<h1>Spherical Plotting utility<a class="headerlink" href="#spherical-plotting-utility" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-pyradi.ryplotspherical">
<span id="overview"></span><h2>Overview<a class="headerlink" href="#module-pyradi.ryplotspherical" title="Permalink to this headline">¶</a></h2>
<p>This module provides tools for creating and viewing spherical plots.</p>
<p>The spherical plotting tool, using Mayavi, requires two sets of data
in order to create the spherical plot: the vertex locations in (x,y,z)
and the spatial relationship between the vertices, i.e. triangulation of
nearest neighbours.  This spatial relationship is required to create
surface elements between the vertices. If the spatial relationship
is not known, the data is merely a cloud of points, with no surface
content.</p>
<p>The easiest way to create the spatial relationships between the vertices
was to use a complex hull polygon model of an object.  The polygon or
wireframe model has the requires vertices and spatial relationships.</p>
<p>In the original application of this tool, a series of spheres were created
using MeshLab.  The essential property of these spheres was that the vertices
on the surface of the spheres were spaced equidistant over the surface, i.e.
an optimal spatial sampling distribution.  The files were exported as OFF
files, and should be in the pyradi data/plotspherical directory.
There are 6 possible input files, each with different number of samples
on the unit sphere:  12, 42, 162, 642, 2562 or 10242.</p>
<p>Any object, with the required vertices and spatial relationships can
be used. it does not have to be equi-sampled spheres.</p>
<p>The data must be in the OFF wireframe format.</p>
<dl class="docutils">
<dt>There are two possible trajectory file types:</dt>
<dd><ul class="first last simple">
<li>&#8216;Rotate&#8217; Stationary sensor and object with the target rotating.
In this case the trajectory file specifies the target trajectory.</li>
<li>&#8216;Orbit&#8217; Stationary object with orbiting sensor.
In this case the trajectory file specifies the sensor trajectory.</li>
</ul>
</dd>
</dl>
<p>The sphere data available in pyradi/data/plotspherical are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Filename</th>
<th class="head"><dl class="first last docutils">
<dt>Resolution</dt>
<dd>(degrees)</dd>
</dl>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sphere_0_12</td>
<td>56.9</td>
</tr>
<tr class="row-odd"><td>sphere_1_42</td>
<td>28.5</td>
</tr>
<tr class="row-even"><td>sphere_2_162</td>
<td>14.2</td>
</tr>
<tr class="row-odd"><td>sphere_3_642</td>
<td>7.1</td>
</tr>
<tr class="row-even"><td>sphere_4_2562</td>
<td>3.56</td>
</tr>
<tr class="row-odd"><td>sphere_5_10242</td>
<td>1.78</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>The workflow is as follows:</dt>
<dd><ol class="first last arabic simple">
<li>Use writeRotatingTargetOssimTrajFile (or your own equivalent) to
calculate the appropriate trajectory file.
At the same time, there are two additional files created
(vertices and triangles) - keep these safe.</li>
<li>Create your data set (e.g. run simulation) using the trajectory
file. Collect the simulation data in a format for plotting.</li>
<li>Use the simulation data, together with the triangles and
vertices file, to plot the data. The triangles and vertices
are require to set up the plotting environment, consider this
the three-dimensional &#8216;grid&#8217;, while the simulation data
provides the data to be plotted in this grid.</li>
</ol>
</dd>
</dl>
<p>This tool was originally developed to create trajectory files for the
Denel/CSIR OSSIM simulation.  The code was restructured for greater
universal application, but the final example is still an OSSIM case.</p>
<p>See the __main__ function for examples of use.</p>
</div>
<div class="section" id="module-functions">
<h2>Module functions<a class="headerlink" href="#module-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pyradi.ryplotspherical.readOffFile">
<tt class="descclassname">pyradi.ryplotspherical.</tt><tt class="descname">readOffFile</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#pyradi.ryplotspherical.readOffFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads an OFF file and returns the vertices and triangles in numpy arrays.</p>
<p>The OFF file is read and the data captured in the array structures.
This is a fairly trivial reading task.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><div class="first last line-block">
<div class="line">filename (string): name of the OFF file</div>
</div>
</dd>
<dt>Returns:</dt>
<dd><div class="first last line-block">
<div class="line">vertices(numpy.array([])): array of vertices as [x y z]</div>
<div class="line">triangles(numpy.array([])): array of triangles as []</div>
</div>
</dd>
<dt>Raises:</dt>
<dd><div class="first last line-block">
<div class="line">No exception is raised.</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyradi.ryplotspherical.getRotateFromOffFile">
<tt class="descclassname">pyradi.ryplotspherical.</tt><tt class="descname">getRotateFromOffFile</tt><big>(</big><em>filename</em>, <em>xPos</em>, <em>yPos</em>, <em>zPos</em><big>)</big><a class="headerlink" href="#pyradi.ryplotspherical.getRotateFromOffFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads an OFF file and returns object attitude and position.</p>
<p>Calculate the pitch and yaw angles to point the object&#8217;s X-axis towards
the OFF file vertex directions.</p>
<p>Euler order is yaw-pitch-roll, with roll equal to zero.
Yaw is defined in xy plane.
Pitch is defined in xz plane.
Roll is defined in yz plane.</p>
<p>The object is assumed to stationary at the position (xPos, yPos, zPos),
the position arrays are the same length as the attitude angle arrays,
but all values in each individual array are all the same.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><div class="first last line-block">
<div class="line">filename (string): OFF file filename</div>
<div class="line">xPos (double): scale factor to be applied to x axis</div>
<div class="line">yPos (double): scale factor to be applied to y axis</div>
<div class="line">zPos (double): scale factor to be applied to z axis</div>
</div>
</dd>
<dt>Returns:</dt>
<dd><div class="first last line-block">
<div class="line">x(numpy.array()): array of x values</div>
<div class="line">y(numpy.array()): array of y values</div>
<div class="line">z(numpy.array()): array of z values</div>
<div class="line">roll(numpy.array()): array of roll values</div>
<div class="line">pitch(numpy.array()): array of pitch values</div>
<div class="line">yaw(numpy.array()): array of yaw values</div>
<div class="line">vertices(numpy.array([])): array of vertices as [x y z]</div>
<div class="line">triangles(numpy.array([])): array of triangles as []</div>
</div>
</dd>
<dt>Raises:</dt>
<dd><div class="first last line-block">
<div class="line">No exception is raised.</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyradi.ryplotspherical.getOrbitFromOffFile">
<tt class="descclassname">pyradi.ryplotspherical.</tt><tt class="descname">getOrbitFromOffFile</tt><big>(</big><em>filename</em>, <em>xTargPos</em>, <em>yTargPos</em>, <em>zTargPos</em>, <em>distance</em><big>)</big><a class="headerlink" href="#pyradi.ryplotspherical.getOrbitFromOffFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads an OFF file and returns sensor attitude and position.</p>
<p>Calculate the sensor attitude and position such that the sensor always
look at the object located at ( xTargPos, yTargPos, zTargPos), at
a constant distance.</p>
<p>Euler order is yaw-pitch-roll, with roll equal to zero.
Yaw is defined in xy plane.
Pitch is defined in xz plane.
Roll is defined in yz plane.</p>
<p>The object is assumed to stationary at the position
(xTargPos, yTargPos, zTargPos).</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><div class="first last line-block">
<div class="line">filename (string): OFF file filename</div>
<div class="line">xTargPos (double): x target object position (fixed)</div>
<div class="line">yTargPos (double): y target object position (fixed)</div>
<div class="line">zTargPos (double): z target object position (fixed)</div>
<div class="line">distance (double): range at which sensor orbits the target</div>
</div>
</dd>
<dt>Returns:</dt>
<dd><div class="first last line-block">
<div class="line">x(numpy.array()): array of x values</div>
<div class="line">y(numpy.array()): array of y values</div>
<div class="line">z(numpy.array()): array of z values</div>
<div class="line">roll(numpy.array()): array of roll values</div>
<div class="line">pitch(numpy.array()): array of pitch values</div>
<div class="line">yaw(numpy.array()): array of yaw values</div>
<div class="line">vertices(numpy.array([])): array of vertices as [x y z]</div>
<div class="line">triangles(numpy.array([])): array of triangles as []</div>
</div>
</dd>
<dt>Raises:</dt>
<dd><div class="first last line-block">
<div class="line">No exception is raised.</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyradi.ryplotspherical.writeRotatingTargetOssimTrajFile">
<tt class="descclassname">pyradi.ryplotspherical.</tt><tt class="descname">writeRotatingTargetOssimTrajFile</tt><big>(</big><em>filename</em>, <em>trajType</em>, <em>distance</em>, <em>xTargPos</em>, <em>yTargPos</em>, <em>zTargPos</em>, <em>xVel</em>, <em>yVel</em>, <em>zVel</em>, <em>engine</em>, <em>deltaTime</em><big>)</big><a class="headerlink" href="#pyradi.ryplotspherical.writeRotatingTargetOssimTrajFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads OFF file and create OSSIM trajectory files for rotating object
or orbiting sensor.</p>
<p>This function writes a file in the custom OSSIM trajectory file format.
Use this function as an example on how to use the ryplotspherical
functionality in your application.</p>
<dl class="docutils">
<dt>Two different types of trajectory files are created:</dt>
<dd><ol class="first last arabic simple">
<li><strong>trajType = &#8216;Rotate&#8217;</strong>
Calculate attitude (pitch and yaw angles only, roll is zero) to
orientate an object&#8217;s x-axis along the vertices in the OFF file.
The location of the object is fixed at (xTargPos,yTargPos,zTargPos).</li>
<li><strong>trajType = &#8216;Orbit&#8217;</strong>
Calculate location and attitude (pitch and yaw angles only, roll is
zero) of an orbiting sensor looking a a fixed location
(xTargPos, TargPos, zTargPos) from a given distance.</li>
</ol>
</dd>
</dl>
<p>The velocity and engine settings are constant for all views at the
values specified.</p>
<p>The deltaTime parameter is used to define the time increment to be
used in the trajectory file.</p>
<p>Two additional files are also written to assist with the subsequent
viewing.</p>
<blockquote>
<div><ol class="arabic simple">
<li>The <strong>directions</strong> file contains the normalised direction vectors
between the object and observer. Depending on the trajectory type
(see above), the sensor and object switch locations for these
vectors. These vectors are the directions of sampled intensity values.</li>
<li>The <strong>triangles</strong> file defines triangles that provides the spatial
linking between adjacent vectors, used when plotting the data.
We plot the complex hull comprising these triangles, with vertices
along the direction vectors, with length given by the simulated
data set.</li>
</ol>
</div></blockquote>
<p>OSSIM Users: For examples of how to use these trajectory files, see
test points tp01l (that is lowercase L) and tp01m. The scenario files
are present in the the appropriate test point directory (l and m) and
the plotting routines are in the tp01 utils directory.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><div class="first last line-block">
<div class="line">filename (string): OFF file filename</div>
<div class="line">trajType (string): type of trajectory: &#8216;Rotate&#8217; or &#8216;Orbit&#8217;</div>
<div class="line">distance (double): distance from sensor ro object</div>
<div class="line">xTargPos (double): object x position.</div>
<div class="line">yTargPos (double): object y position.</div>
<div class="line">zTargPos (double): object z position.</div>
<div class="line">xVel (double): velocity in x direction</div>
<div class="line">yVel (double): velocity in y direction</div>
<div class="line">zVel (double): velocity in z direction</div>
<div class="line">engine (double): engine settiing</div>
<div class="line">deltaTime (double): sampling time increment in output file</div>
</div>
</dd>
<dt>Returns:</dt>
<dd><div class="first last line-block">
<div class="line">nothing</div>
</div>
</dd>
<dt>Raises:</dt>
<dd><div class="first last line-block">
<div class="line">No exception is raised.</div>
</div>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Spherical Plotting utility</a><ul>
<li><a class="reference internal" href="#module-pyradi.ryplotspherical">Overview</a></li>
<li><a class="reference internal" href="#module-functions">Module functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ryplot.html"
                        title="previous chapter">Plotting utility</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ryutils.html"
                        title="next chapter">Utility Functions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/ryplotspherical.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ryutils.html" title="Utility Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="ryplot.html" title="Plotting utility"
             >previous</a> |</li>
        <li><a href="index.html">pyradi  documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, CJ Willers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>